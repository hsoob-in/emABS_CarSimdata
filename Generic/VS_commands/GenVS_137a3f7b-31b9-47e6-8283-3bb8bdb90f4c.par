PARSFILE
#FullDataName Generic VS Commands`Lane Departure Warning, from Path Det.`ADAS Support
#VehCode VS Commands

#MiscYellow0
! define a threshold sensitivity value for LDW, by which the lane width is divided
DEFINE_PARAMETER LDW_THRESH = 0.35; -; LDW sensitiviy threshold value
DEFINE_PARAMETER FIX_STEER_RATE = 5; deg/s; the rate of steering input during a fix steer RDM event

! YoffsetPD_1: left lane LTARG: LANE_WIDTH, is the predicted path lateral offest for the left lane marker
! YoffsetPD_2: rigth lane LTARG: 0,  is the predicted path lateral offest for the right lane marker

! These equations look at the closest point
define_output threshDist = LANE_WIDTH*LDW_THRESH; m; distance for triggering LDW
define_output WARN_L = (YoffsetPD_1 < threshDist);-; L edge warning
define_output WARN_R =  ( YoffsetPD_2 > -threshDist);-; R edge warning


! if road departure mitigation is enabled, correct the steering, based on the L or R LDW activation
define_output FixSteer =   if ( WARN_L | WARN_R, 1, 0) ;-;  Need steering correction
#ENDMYellow

PARSFILE Animator\HUD\HUD_c5b2ffa5-772d-49e9-866c-9d347c37c2b3.par
#BlueLink0 Animator: HUD`Lane Departures` ADAS Alerts` , Miscellaneous`HUD_c5b2ffa5-772d-49e9-866c-9d347c37c2b3

PARSFILE Plot\Setup\Plot_9e698a86-d2f8-4b1e-8157-7fc5d67954d9.par
#BlueLink3 Plot: Setup`Lane Detection Alerts: LDW From LKAS` ADAS and AEB Alerts and Commands` , Plot`Plot_9e698a86-d2f8-4b1e-8157-7fc5d67954d9


#EMBEDDED_NOTES
#*Note: this Lane Depature Warning (LDW) and Road Departure Mitigation (RDM) is meant to be used the the LKAS, constructed with relevant Path Detector Dataset
#
#This Dataset defines three output variables involved with lane detection: WARN_L, WARN_R, and FixSteer
#- The WARN and FixSteer Outputs are Boolean flags
#- The two WARN variables are used trigger HUD icons to appear in the animator, with settings also in this Dataset.
#- The FixSteer is for use with VS Events
#END_EMBEDDED_NOTES

LOG_ENTRY Used Dataset: Generic VS Commands; { ADAS Support } Lane Departure Warning, from Path Det.
#Library : Generic VS Commands
#DataSet : Lane Departure Warning, from Path Det.
#Category: ADAS Support
#FileID  : GenVS_137a3f7b-31b9-47e6-8283-3bb8bdb90f4c
#Product : CarSim 2021.0
#VehCode VS Commands

END
